ip a 
iwctl
  station wlan0 connect Wi-Fi

fdisk -l
fdisk /dev/nvme0n1
  g
  w
cfdisk /dev/nvme0n1
  efi 512M
  linux filesystem rest
mkfs.vfat /dev/nvme0n1p1
mkfs.btrfs /dev/nvme0n1p2

mount /dev/nvme0n1p2 /mnt
btrfs subvolume create /mnt/@
btrfs subvolume create /mnt/@home 
btrfs subvolume create /mnt/@swap
umount /mnt
mount -o compress=zstd,subvol=@ /dev/nvme0n1p2 /mnt
mount -o compress=zstd,subvol=@home /dev/nvme0n1p2 /mnt/home
mount -o nodatacow,nospace_cach,subvol=@swap /dev/nvme0n1p2 /mnt/swap
mount /dev/nvme0n1p1 /mnt/efi
btrfs filesystem mkswapfile --size 4g --uuid clear /mnt/swap/swapfile
swapon /mnt/swap/swapfile 
genfstab

pacstrap -i /mnt base base-devel linux linux-firmware git wget curl btrfs-progs grub grub-btrfs inotify-tools timeshift neovim networkmanager intel-ucode/amd-ucode man nftables iptables-nft
genfstab -U /mnt >> /mnt/etc/fstab
# control all <options> specially for swap subvol
cat /mnt/etc/fstab

ln -sf /usr/share/zoneinfo/CET /etc/localtime
hwclock --systohc
nvim /etc/locale.gen
locale-gen
nvim /etc/locale.conf
nvim /etc/vconsole.conf
echo "fgk" >> /etc/hostname
nvim /etc/hosts
mkinitcpio -P
pacman -S grub-btrfs inotify-tools
grub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=GRUB
grub-mkconfig -o /boot/grub/grub.cfg
passwd
systemctl enable NetworkManager
systemctl enable nftables
exit
swapoff /mnt/swap/swapfile
umount -R /mnt 
reboot

chsh root
# add to "ExecStart=..." in end "-t"
systemctl edit --full grub-btrfsd
systemctl enable grub-btrfsd
timedatectl set-ntp true
nvim /etc/pacman.conf 
pacman -Syu flatpak blueman bluez fzf zip unzip intel-gpu-tools intel-compute-runtime intel-graphics-compiler mesa bc jq speedcrunch udiskie kitty mpv bemenu telegram-desktop qbittorrent waybar imv grim slurp gimp evince texstudio keepassxc libreoffice-still firefox thunderbird steam prismlauncher hyprcursor breeze breeze-gtk breeze-icons ttf-noto-nerd noto-fonts noto-fonts-emoji noto-fonts-cjk wine winetricks fuse htop hyprland gamemode tmux xdg-desktop-portal-hyprland polkit-kde-agent polkit qemu virt-manager qemu-full dnsmasq bridge-utils fastfetch mako ripgrep eza hyprpaper exa ncdu jre8-openjdk jre21-openjdk jre17-openjdk nwg-look npm pipewire pipewire-pulse pipewire-alsa pipewire-jack wireplumber qt5-wayland qt6-wayland

systemctl enable libvirtd
systemctl enable bluetooth

echo "vm.max_map_count = 2147483642" >> /etc/sysctl.d/80-gamecompatibility.conf


# put '!' behind debug flag in makepkg.cfg like hire:
# OPTIONS=(strip docs !libtool !staticlibs emptydirs zipman purge !debug !lto)
nvim /etc/makepkg.cfg

#in user
git clone https://aur.archlinux.org/yay.git
cd yay 
makepkg -si
cd ..
rm -fr yay

# for timeshift on wayland 
pacman -S xorg-xhost 

useradd -mG wheel,libvirt flekgekei -s /bin/zsh
passwd flekgekei

# for laptops 
echo -e "\nHandleLidSwitch=ignore" >> /etc/systemd/logind.conf

# in user
yay -S timeshift-autosnap

### for my dotfiles

sudo setcap cap_perfmon=+ep /usr/bin/intel_gpu_top

sudo pacman -S texlive

systemctl --user enable syncthing.service

yay -S ctpv coppwr pwvucontrol

ysy -S qt5-styleplugins qt6gtk2
sudo pacman -S qt6ct qt5ct

yay -S  megasync-bin


yay -S protonup-qt-bin
